{# Template for Java class method unit tests (JUnit 5) #}
package {{ package_name | default('generated.tests') }};

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import static org.junit.jupiter.api.Assertions.*;
{% for imp in imports_needed %}
{{ imp }}{% if not imp.endswith(';') %};{% endif %}
{% endfor %}

/**
 * Tests for {{ target_class }}.{{ target_name }}
 *
 * Auto-generated by Pipeline Test Agent
 */
class {{ target_class }}{{ target_name | title | replace('_', '') }}Test {

    private {{ target_class }} instance;

    @BeforeEach
    void setUp() {
        // Initialize the class under test
        // TODO: Adjust constructor arguments if needed
        instance = new {{ target_class }}();
    }

{% for case in test_cases %}
    @Test
    @DisplayName("{{ case.description }}")
    void {{ case.name }}() {
{% for setup_line in case.setup %}
        {{ setup_line }}
{% endfor %}
{% if case.expected.raises %}
        assertThrows({{ case.expected.raises }}.class, () -> {
            instance.{{ target_name }}({% for key, value in case.inputs.items() %}{{ value | safe }}{% if not loop.last %}, {% endif %}{% endfor %});
        });
{% else %}
{% if return_type %}
        var result = instance.{{ target_name }}({% for key, value in case.inputs.items() %}{{ value | safe }}{% if not loop.last %}, {% endif %}{% endfor %});
{% else %}
        instance.{{ target_name }}({% for key, value in case.inputs.items() %}{{ value | safe }}{% if not loop.last %}, {% endif %}{% endfor %});
{% endif %}
{% if case.expected.returns is not none %}
        assertEquals({{ case.expected.returns | safe }}, result);
{% elif return_type %}
        assertNotNull(result);
{% endif %}
{% endif %}
{% for teardown_line in case.teardown %}
        {{ teardown_line }}
{% endfor %}
    }

{% endfor %}
}
